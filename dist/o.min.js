/* 2017 - 2018 ⊕ Otağ 2.1.1
 * https://otagjs.org
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.O=e()}(this,function(){"use strict";function Sock(t){t=Object.assign({url:null,q:{},interval:3e3},"string"==typeof t?{url:t}:t||{}),t.q=Object.assign(t.q,t.socketio?{transport:"polling",EIO:3}:{_osid:O._uid(16)}),t.url=t.url||window.location.origin,t.socketio&&(t.url+="socket.io/");let e=/((ws|http)s?):\/\//g.exec(t.url);e?(e=e[1],"http"==e.substr(0,4)&&(t.url=(e.length>4?"wss://":"ws://")+t.url.split("://")[1])):t.url="wss://"+t.url,t.url+="?"+_queryString(t.q);let n,i,s,r={};return s={on(t,e){return t instanceof Object?Object.keys(t).forEach(e=>{r[e]=t[e]}):r[t]=e,this},connect(){return this.connected||(n=Object.assign(new WebSocket(t.url+"&_tstamp="+O.Time.now),{onopen(t){i.stop(),this.connected=1,r.open&&r.open(t.data)},lib:this,onmessage(t){t=t.data;let e=t.indexOf(","),n=t.substr(0,e);r[n]&&r[n](JSON.parse(t.substring(e+1)),this)},onclose(t){"error"==t.type&&r.error&&r.error(t),console.log("error",t),this.lib.connected=0,i.start()}}),n.onerror=n.onclose),this},emit(t,e){n.send(t+","+JSON.stringify(e))}},i=O.interval(s.connect,t.interval).start(),s.connect()}function req(t="",e,n){var i=new XMLHttpRequest;return t=t.indexOf("//")>-1?t:("string"!=typeof this?"./ep₺":this).vars({ep:t}),i.open(n?n.toUpperCase():e?"POST":"GET",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),new Promise(function(t,n){i.onreadystatechange=function(){if(4==this.readyState)if(200==this.status)if(""!=this.response){var e;try{e=JSON.parse(this.response)}catch(t){e=this.response}t(e)}else n({error:"empty response"});else n({error:{code:this.status}})},i.send(e?_queryString(e):"")})}let Time=new Proxy({interval(...t){let e;return{start(){return this.stop(),e=setInterval.apply(null,t),this},stop(){return clearInterval(e),this}}},rules:{yesterday:864e5,today:0,now:0,tomorrow:-864e5}},{get(t,e){if("interval"==e)return t[e];let n=new Date(+new Date-t.rules[e]);return"now"!=e&&["Hours","Minutes","Seconds"].map(t=>n["set"+t](0)),Math.floor(n.getTime()/1e3)}}),Chain=function(t){let e=this||null;return function(...n){return e=this||e,new Promise((i,s)=>{let r,o=t.shift().prom().apply(e,n);for(;r=t.shift();)o=o.then(r).catch(s);o.then(i).catch(s)})}},now=()=>Math.floor(+new Date/1e3),Disk=new Proxy({expire:new Proxy({},{set(t,e,n){return e=Disk.ƒscope?Disk.ƒscope+"_"+e:e,localStorage.setItem(e+":expire",now()+Number(n)),!0}}),rem:t=>{"string"==typeof t&&(t=[t]),"string"==typeof Disk.ƒscope&&(t=t.map(t=>Disk.ƒscope+"_"+t)),t.forEach(t=>{localStorage.removeItem(t)})}},{get:(t,e)=>{if(t[e])return t[e];let n;if(e=t.ƒscope?t.ƒscope+"_"+e:e,(n=localStorage.getItem(e+":expire"))&&Number(n)<now())return localStorage.removeItem(e),null;e=localStorage.getItem(e);try{return JSON.parse(e)}catch(t){return e}},set:(t,e,n)=>{return"ƒscope"==e?(t.ƒscope=n,!0):(e=t.ƒscope?t.ƒscope+"_"+e:e,localStorage.setItem(e,JSON.stringify(n)),!0)},deleteProperty:(t,e)=>{return e=t.ƒscope?t.ƒscope+"_"+e:e,localStorage.removeItem(e),!0},has:(t,e)=>{return e=t.ƒscope?t.ƒscope+"_"+e:e,!!localStorage[e]}});class Sanal$$1{constructor(t={_el:""}){Object.assign(this,t),t.ƒ&&Object.defineProperties(this,Object.keys(t.ƒ).reduce((e,n)=>{return console.log(n),e[n]={get:t.ƒ[n]},e},{})),t.resp&&Object.defineProperties(this,Object.keys(t.resp).reduce((e,n)=>{return e[n]={get:()=>this["_"+n],set(e){t.resp[n](e),this["_"+n]=e}},e},{})),this.shadow&&O$1.ready.then(()=>this.el),this.has(this.View)}V(t=""){return t.split(":").reduce((t,e)=>t&&t.View?""==e?t.View:t.View[e]:null,this)}p(t){let e=this;for(;t--;)e=e.parent;return e}do(t,e){return this.click=(()=>this.parent[t]()),this}has(t){return t&&(Object.keys(t).forEach(e=>{"string"==typeof t[e]&&("₺"==t[e][0]?t[e]=t[e].el:t[e]=new Sanal$$1({_el:t[e],parent:this})),t[e]instanceof Sanal$$1?t[e].parent=this:(t[e].parent=this,t[e]=new Sanal$$1(t[e]))}),this.View=t),this}append(t){return this.content=t,this}set content(t){this.$content=t,this._el&&"string"!=typeof this._el&&(this._el.innerHTML="",this._el.append(t.map(t=>t.el)))}get content(){return this.$content}set to(t){this.el.to=t}get valid(){if(this.validate){if("function"==typeof this.validate)return this.validate(this.value);{let t;return!Object.keys(this.validate).some(e=>{return(t=this.validate[e])&&!("function"==typeof t?t(this.View[e].value):t.test(this.View[e].value))})}}return!0}set value(t){if(t instanceof Promise)return void t.then(t=>{this.value=t});if(this.bind){let e=[];this.bind.before&&e.push(this.bind.before),e=e.concat(Object.keys(t).map(e=>{let n=this.bind.model.el;return n.source?n.oid=t[e]:n.value={key:e,value:t[e],_model:this.bind.model},n})),this.bind.after&&e.push(this.bind.after),this.content=e}else if(this.View){t._model&&(t=t.value);let e=Object.keys(t);e.forEach(e=>{this.View[e]&&("string"==typeof this.View[e]?this.View[e]=this.View[e].split(":").shift()+":"+t[e]:this.View[e].value=t[e])}),Object.keys(this.View).filter(t=>e.indexOf(t)==-1).forEach(e=>{e in t&&(this.View[e].value=t[e])})}else this.el.set&&this.el.set(t);this.set&&this.set(t),this.change&&this.change()}get value(){this.View&&Object.keys(this.View).filter(t=>"_"!=t[0]).forEach(t=>{this.View[t].value})}get el(){let t=()=>{this._el.sanal=this,this.layout=this.template||Object.keys(this.View||{}).join("\n")+"\ncontent₺","string"==typeof this.bind&&(this.bind={model:this.bind});let t,e="NULLOID";this.source&&(t=this.source.on||"oid",t in this&&(e=this[t]),Object.defineProperty(this,t,{get:()=>this["_"+t],set:e=>{this["_"+t]=e,this.value=this.source[e]}})),this.fetch&&(this.fetcher=this.fetch),["click","select","focus","load","keyup","keydown","keypress","change"].filter(t=>this[t]).forEach(t=>this._el["on"+t]="string"==typeof this[t]?e=>this[this[t]](e):e=>this[t](e)),this.enter&&this._el.addEventListener("keyup",(t=>13==t.keyCode?this[this.enter](t.target.value):null).prevent.stop),"NULLOID"!=e&&(this[t]=e)};return this._el&&"string"==typeof this._el&&(this._el=this._el.el,t()),this._el}set fetcher(t){clearInterval(this._fetchInterval);let e,n=()=>{O$1.req(t.from).then(e=>{t.shape&&(e=t.shape(e)),this.value=e,t.save&&(Disk[t.save]=e,t.expire&&(Disk.expire[t.save]=t.expire))})};t.save&&(e=Disk[t.save])?this.value=e:n(),t.refresh&&(this._fetchInterval=setInterval(n,1e3*t.refresh))}set layout(t){this.el.innerHTML="";let e,n,i,s,r=this.el,o=r,c=this.View;t=t.split("\n").forEach(t=>{if(s=t.trim(),e=s.length){if(i=(t.length-e)/2,c&&this.V(s))s=this.V(s).el;else if(":"==s[0])r instanceof Text&&n==i&&o.appendChild(document.createElement("br")),s=document.createTextNode(s.substring(1).trimLeft());else{s=s.el;let t=["click","select","focus","load","keyup","keydown","keypress","change"];[...s.attributes].forEach(e=>{console.log(e),t.indexOf(e.name)>-1?s["on"+e.name]=(t=>this[e.value].call(this,t)).stop.prevent:"enter"==e.name&&s.addEventListener("keyup",(t=>{console.log(t,t.keyCode),13==t.keyCode&&this[e.value](t.target.value)}).prevent.stop)})}if(null!=n&&i!=n){o=r;for(let t=i-1;t<n;t++)o=o.p}s instanceof Sanal$$1&&(s=s.el),o.appendChild(s),r=s,s.p=o,n=i}})}}var none={_el:"Bulunamadı",name:"Bulunamadı",template:`
    center
      h1:Bet Bulunamadı
      p:Aradığınız bet bulunamadı`};class Page{constructor(t={}){t=Object.assign({routes:{},none:none,handler:"body"},t),t.routes.none=t.none,this.handler=t.handler,this.title=t.title;let e=this.routes=t.routes;Object.keys(e).filter(t=>"string"!=typeof e[t]).map(t=>{return e[t]instanceof Sanal$$1||(e[t]=new Sanal$$1(e[t])),e[t].name||(e[t].name=t),e[t]._name=e[t].name,Object.defineProperty(e[t],"name",{get:()=>{return e[t]._name},set:n=>{this.setTitle(n),this.Nav.value={[t]:n},e[t]._name=n}}),e[t]}),this.route(),window.onpopstate=this.route.bind(this)}setTitle(t){this._titleInfo=t=t||this._titleInfo,document.title=this.title}get title(){return(this._title||"title₺").vars({title:this._titleInfo})}set title(t){this._title=t,this.setTitle(t)}route(t){let e=0;t||(t=decodeURI(location.hash)),t instanceof Object&&!(t instanceof Array)&&(e=t.type&&"pushstate"==t.type,t=t.state||decodeURI(location.hash));var n=t.split("/");if("#"==n[0]&&n.shift(),""==n[0]&&this.routes.index)return this.route("index");let i,s=n.shift();if((i=this.routes[s])||(s="none",i=this.routes.none),"string"==typeof i)return this.route(i);if("function"==typeof i&&i.apply(null,n),i instanceof Sanal$$1){let t=this.page!=s;this.change&&this.change(s,n,t,!!i.once),this.page=s,this.handler&&("function"==typeof this.handler?this.handler(i):"string"==typeof this.handler?i.to=this.handler:this.handler.handle?this.handler.handle(i,t):i.to=this.handler),i.once?(i.once.apply(i,n),delete i.once):i.wake&&i.wake.apply(i,n)}e||window.history[(e?"push":"replace")+"State"](t,null,t.indexOf("#")==-1?"#/"+t:t)}Navigation(t={}){return t=Object.assign({hide:[]},t),t.hide.push("none"),this.Nav="Nav".kur({View:Object.keys(this.routes).filter(e=>"string"!=typeof this.routes[e]&&t.hide.indexOf(e)==-1).reduce((t,e)=>{return t[e]='a[href="/#/'+e+'"][title="'+this.routes[e].name+'"]:'+this.routes[e].name,t},{})})}set page(t){this._page!=t&&(this.now=this.routes[t],this._page=t)}get page(){return this._page}set now(t){this.now&&this.now.idle&&this.now.idle();let{name:name}=t;this.setTitle(name),this._now=t}get now(){return this._now}set to(t){this.handler=t}}var Tor={Sock:Sock,req:req};let _queryString=t=>{let e=arguments[1];var n=[];for(var i in t)if(t.hasOwnProperty(i)){var s=e?e+"["+i+"]":i,r=t[i];n.push("object"==typeof r?_queryString(r,s):encodeURIComponent(s)+"="+encodeURIComponent(r))}return n.join("&")},O$1={require(js,path=""){return Tor.req(path+js+".js").then(code=>{let module={};return eval(code),module.exports})},define(t,e){this[t]||(this[t]={}),Object.keys(e).forEach(n=>this[t][n]=e[n])},calc:(t,e)=>{return Object.defineProperties(t,Object.keys(e).reduce((n,i)=>{return n[i]={get:e[i].bind(t),set:t=>console.error(i,"için değer ataması yapılamaz.")},n},{})),t},UI:{M:(...t)=>O$1.Model[t.shift()].apply("",t)},req:Tor.req,Model:{},ready:new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>{let{body:body,head:head}=document;t({body:body,head:head})})})},_selector=t=>{let e=[],n=(t.match(/\[([0-9A-Za-z.-_şŞüÜöÖçÇİığĞ]+)="([0-9A-Za-z0-9,'.-_şŞüÜöÖçÇİığĞ#\(\):@ ]+)"\]/g)||[]).reduce((e,n)=>{return t=t.replace(n,""),n=n.match(/([0-9A-Za-z.şŞüÜöÖçÇİığĞ]+)="([0-9A-Za-z0-9,.-_şŞüÜöÖçÇİığĞ#\(\):@ ]+)/),e[n[1]]=n[2],e},{});t.indexOf(":")>-1&&(e=t.split(":"),t=e.shift());var i={class:/\.([0-9A-Za-z_\-şŞüÜöÖçÇİığĞ]+)/g,id:/#([0-9A-Za-z\-_şŞüÜöÖçÇİığĞ]+)/,ui:/[$|₺|₸|₼]([0-9A-Za-zşŞüÜöÖçÇİığĞ]+)/,tag:/^[a-zşüöçığ][a-zşüöçığ0-9]*?$/g};return i=Object.keys(i).reduce((e,n)=>{for(var s,r=[],o=-1,c=i[n];(s=c.exec(t))&&c.lastIndex!=o;){if(r.push(s[0]),o=c.lastIndex,!(e[n]instanceof Array)){e[n]=s[1]||s[0],t=t.replace(s[0],"");break}e[n].push(s[1])}return r.forEach(e=>{t=t.replace(e,"")}),e},{class:[],id:"",ui:null,tag:null}),i.args=e,i.attr=n,t.length&&(i.class=i.class.concat(t.split(" "))),i},proto={Element:{destroy(t=0,e=300){return new Promise(n=>{setTimeout(()=>{setTimeout(()=>{this.remove(),n()},e),this.Class("destroy")},t)})},disp(t){return t||this.hasOwnProperty("dispState")||(this.dispState=this.style.display),this.style.display=t?this.dispState:"none",this},class(t){if("function"==typeof t)this.class(t());else{let e={add:[],rem:[]};Object.keys(t).forEach(n=>{e[("function"==typeof t[n]?t[n]():t[n])?"add":"rem"].push(n)}),this.Class(e.rem,0).Class(e.add)}return this},Class(t,e=!0){return t instanceof Array||(t=[t]),t[0]&&""!=t[0]&&(this.className=t.reduce((t,n)=>{return t=t.replace(new RegExp("(\\b"+n+")+"),""),(e?t+" "+n:t).replace(/\s{2}/g," ").trim()},this.className),""==this.className.trim()&&this.removeAttribute("class")),this},do(t,e="click",n){return arguments[3]&&(n=[...arguments].splice(2)),this["on"+e]=(()=>{this.parent[t].apply(this.parent,n||[])}),this},append(t,e){return t&&(t instanceof Array||(t=[t]),e&&(t=t.reverse()),t.forEach(t=>this.appendChild(t.el))),this},set(...t){return"string"==typeof t[0]&&(this.innerHTML=t.map(t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")).join("<br>")),this},pitch(t){return t.html&&(this.innerHTML=Disk[t.html]),this.innerHTML="",t?this.append.apply(this,arguments):this}},String:{kur(t={}){return new Sanal$$1(Object.assign(t,{_el:this}))},val(t){let e=this.split(",").map(e=>{return t.val[e]});return 1==e.length?e[0]:e},vars(t){return t="object"==typeof t?t:arguments,Object.keys(t).reduce((e,n)=>{return e.replace(new RegExp("("+n+"[₺|$|₸|₼])+"),t[n])},this)},replaceAll(t,e){let n=this;for(var i in t)for(;n.indexOf(t[i])>-1;)n=n.replace(t[i],e[i]);return n},of(t){return"*"==this?t:this.split(",").reduce((e,n)=>{return e[n]=t[n]||null,e},{})},from(t){let e=("*"==this?Object.keys(t):this.split(",")).map(e=>t[e]);return this.indexOf(",")==-1&&"*"!=this?e[0]:e},obj(t,e){return this.split(",").reduce(e instanceof Array?(n,i,s)=>{return n[i]=t[s]||e[s],n}:(n,i,s)=>{return n[i]=t[s]||e,n},{})}},Function:{interval(t){let e,n=this;return{start(...i){return this.stop(),e=setInterval.apply(null,[n,t].concat(i)),this},stop(){return clearInterval(e),this}}},prom(t){let e=this.bind(t);return(...t)=>{return new Promise((n,i)=>{try{var s=e.apply(null,t);s.then?s.then(n).catch(i):n(s)}catch(t){i(t)}})}},debounce(t){let e,n=this;return function(...i){return clearTimeout(e),e=setTimeout(()=>{n.apply(n,i)},t),this}}},SVGElement:{set(t,e,n){return this.disp(0),O$1.req(t).then(t=>{let i=(new DOMParser).parseFromString(t,"text/xml").children[0];[...i.attributes].forEach(t=>this.setAttribute(t.name,t.value)),this.style.height=e,this.style.width=n,this.innerHTML=i.innerHTML,this.disp(1)}),this}},Image:{set(t,e){return e?(O$1.req(t).then(t=>this.innerHTML=t),this):(this.loader=new Promise((e,n)=>{Object.assign(this,{onload(){this.Class("loading",0),e()},onerror(){this.Class("loading",0).Class("error"),n()},src:t})}),this.Class("loading"))}},HTMLInputElement:{set(t,e="text"){this.type=e,this.placeholder=t}}},props={String:{get:{get(){var t=[...document.querySelectorAll(this)];return this.indexOf("#")>-1&&(t=t[0]),t}},to:{set(t){this.el.to=t}},el:{get(){let t,e=_selector(this+"");return e.ui?(O$1.UI[e.ui]||console.error(e.ui,"is not defined"),t=O$1.UI[e.ui].apply(e.ui,e.args)):(t="svg"==e.tag?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(e.tag||"div"),e.args.length&&t.set.apply(t,e.args)),Object.keys(e.attr).map(n=>t.setAttribute(n,e.attr[n])),e.id.length&&(t.id=e.id),e.class.length&&(t.className=e.class.join(" ")),t},set(t){let e=this.el;return["click","load"].forEach(n=>{delete t[n],t[n]&&(e["on"+n]=t[n])}),["prop","has","layout","resp","set","attr","valid"].forEach(n=>{t.hasOwnProperty()&&(e[n](t[n]),delete t[n])}),t.to&&("string"==typeof t.to?t.to.append(e):e.to=t.to,delete t.to),Object.assign(e,t),e}}},Element:{sanal:{get(){return this._sanal},set(t){let e=this.getAttribute("enter");e&&this.addEventListener("keyup",(n=>{13==n.keyCode&&t.parent[e](this.value)}).prevent.stop),this.innerHTML.indexOf("₺")>-1&&(this.innerHTML=this.innerHTML.vars(t)),this._sanal=t}},el:{get(){return this}},str:{get(){let t=["id","class"],e="DIV"!=this.tagName?this.tagName.toLowerCase():"";return e+=""!=this.id?"#"+this.id:"",e+=[...this.classList].map(t=>"."+t).join(""),[...this.attributes].forEach(n=>{t.indexOf(n.name)<0&&(n.value=n.value.replace("https:","").replace("http:",""),e+="["+n.name+'="'+n.value+'"]')}),e}},to:{set(t){"string"==typeof t?O$1.ready.then(()=>{let e=t.get;if(!(e=e instanceof Array?e[0]:e))return console.error('"seçici₺" ile belgede öge bulunamadı'.vars({"seçici":t})),0;e.pitch(this)}):(t instanceof Sanal$$1&&(t=t.el),t.pitch(this))}}},Function:{prevent:{get(){return t=>{t.preventDefault(),this(t)}}},stop:{get(){return t=>{t.stopPropagation(),this(t)}}},bounced:{get(){return this.debounce(100)}}},Image:{value:{get(){return this.src},set(t){return this.loader=new Promise((e,n)=>{this.prop({onload(){this.Class("loading",0),e()},onerror(){this.Class("loading",0).Class("error"),n()},src:t})}),this.Class("loading"),t}}}};(t=>{Object.keys(proto).filter(e=>t[e].prototype||t[e]).forEach(e=>Object.assign(t[e].prototype||t[e],proto[e])),Object.keys(props).filter(e=>t[e].prototype||t[e]).forEach(e=>Object.defineProperties(t[e].prototype||t[e],props[e])),Object.keys(proto.Element).forEach(e=>{t.Number.prototype[e]=t.String.prototype[e]=function(...t){let n=this.kur();return n[e].apply(n,t)}})})(window||global);var geleneksel={require(js,path=""){return Tor.req(path+js+".js").then(code=>{let module={};return eval(code),module.exports})},define(t,e){this[t]||(this[t]={}),Object.keys(e).forEach(n=>this[t][n]=e[n])},calc:(t,e)=>{return Object.defineProperties(t,Object.keys(e).reduce((n,i)=>{return n[i]={get:e[i].bind(t),set:t=>console.error(i,"için değer ataması yapılamaz.")},n},{})),t},UI:{M:(...t)=>O.Model[t.shift()].apply("",t)},req:Tor.req,Model:{},ready:new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>{let{body:body,head:head}=document;t({body:body,head:head})})}),Time:Time,Chain:Chain,Page:Page,Disk:Disk};return geleneksel});